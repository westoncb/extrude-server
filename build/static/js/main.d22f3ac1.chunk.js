(this["webpackJsonpextrude-client"]=this["webpackJsonpextrude-client"]||[]).push([[0],{148:function(e,t,a){e.exports=a(222)},152:function(e,t,a){},182:function(e,t){},186:function(e,t,a){},192:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),s=a.n(o),c=(a(152),a(2)),i=a(12),l=a(1),u=a(79),p=a(11),h=a(3),y=a(17),d=a(13),m=a(15),v=a(80),g=a.n(v),f=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,null,[{key:"randString",value:function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}},{key:"computeCompositeBoundingBox",value:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];e.walkNodes(t,(function(e){e.geometry&&((!a.excludedTypes||!a.excludedTypes.includes(e.userData.objectType))&&n.push(e))}));var r=new l.Box3;return n.forEach((function(e){e.updateMatrixWorld();var t=e.geometry.clone();t.applyMatrix(e.matrixWorld),t.computeBoundingBox(),r=r.union(t.boundingBox)})),r}},{key:"walkNodes",value:function(t,a){a(t);for(var n=0;n<t.children.length;n+=1)e.walkNodes(t.children[n],a)}},{key:"rand",value:function(e,t){return Math.random()*(t-e)+e}},{key:"vec3ToScreenPoint",value:function(e,t,a,n){var r=e.clone(),o=.5*a,s=.5*n;return r.project(t),r.x=r.x*o+o,r.y=-r.y*s+s,{x:r.x,y:r.y}}},{key:"exponentialEaseOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"centroid",value:function(e){var t=e.length;return e.reduce((function(e,a,n){return e.x+=a.x,e.y+=a.y,e.z+=a.z,n===t-1&&(e.x/=t,e.y/=t,e.z/=t),e}),new l.Vector3(0,0,0))}},{key:"pointsAreEqual3D",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001;return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))<a}},{key:"generateId",value:function(){return""+Math.round(1e4*Math.random())}}]),e}(),b=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,null,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.randString(f.rand(3,12));return{name:e,id:f.generateId(),position:new l.Vector3(f.rand(-100,100),0,f.rand(-100,100)),visibleMessages:[],keyStates:{},target:new l.Vector3,skindex:5003*e.length%13}}},{key:"addMessage",value:function(e,t){return Object(y.a)({},e,{visibleMessages:[].concat(Object(i.a)(e.visibleMessages),[t])})}},{key:"removeOldestMessage",value:function(e){var t=e.visibleMessages.slice();return t.shift(),Object(y.a)({},e,{visibleMessages:t})}}]),e}(),k=a(227),w=function(){function e(t,a,n){Object(d.a)(this,e),this.socket=null,this.state={players:{}},this.messages=[],this.localPlayerId=t.id,this.updatePlayers=a,this.updateMessagesFunc=n,this.state.players[t.id]=t,this.connectToServer(t)}return Object(m.a)(e,[{key:"connectToServer",value:function(e){var t=this;this.socket=g()("https://nameless-depths-23573.herokuapp.com"),this.socket.emit("event",{type:"player_enter_request",player:e}),this.socket.on("event",(function(e){t.handleServerEvent(e)})),this.socket.on("disconnect",(function(a){t.handleServerEvent({type:"player_exit",player:e})})),this.socket.on("reconnect",(function(a){t.socket.emit("event",{type:"player_enter_request",player:e})})),this.sendMouseMove=Object(k.a)((function(){return t.socket.emit("event",{type:"player_target_change",playerId:t.localPlayerId,target:t.getLocalPlayer().target})}),1e3),this.periodicSyncInterval=setInterval((function(){t.socket.emit("event",{type:"player_sync",player:t.getLocalPlayer()})}),2e3)}},{key:"handleServerEvent",value:function(e){var t,a=this;switch(e.playerId&&(t=this.state.players[e.playerId]),e.type){case"player_enter":console.log("player_enter: ",e.player),this.state.players[e.player.id]=e.player,this.updatePlayers(this.getPlayersArray());break;case"player_exit":console.log("player_exit: ",e.player),this.state.players[e.player.id]&&e.player.id!==this.localPlayerId&&(delete this.state.players[e.player.id],this.updatePlayers(this.getPlayersArray()));break;case"full_state_request":this.socket.emit("event",{type:"full_state_response",state:this.state});break;case"full_state_update":this.state=e.state,this.updatePlayers(this.getPlayersArray());break;case"input_key_down":this.serverKeyDown(e);break;case"input_key_up":this.serverKeyUp(e);break;case"input_mouse_move":case"input_click":break;case"chat_message":if(e.playerId&&!this.state.players[e.playerId])break;var n=Object(y.a)({},e,{player:t}),r=5e3+1e3*Math.floor(n.message.length/100);this.state.players=Object(y.a)({},this.state.players,Object(h.a)({},e.playerId,b.addMessage(t,n))),setTimeout((function(){a.state.players=Object(y.a)({},a.state.players,Object(h.a)({},e.playerId,b.removeOldestMessage(a.state.players[e.playerId]))),a.updatePlayers(Object.values(a.state.players))}),r),this.messages=this.messages.concat(n),this.updateMessagesFunc(this.messages),this.updatePlayers(Object.values(this.state.players));break;case"player_target_change":if(e.playerId&&!this.state.players[e.playerId])break;this.state.players=Object(y.a)({},this.state.players,Object(h.a)({},e.playerId,Object(y.a)({},t,{target:e.target}))),this.updatePlayers(Object.values(this.state.players));break;case"player_sync":if(e.player.id===this.localPlayerId)break;this.state.players[e.player.id]=e.player,this.updatePlayers(Object.values(this.state.players));break;default:console.log("unrecognized server event: ",e)}}},{key:"getPlayersArray",value:function(){var e=this;return Object.keys(this.state.players).map((function(t){return e.state.players[t]}))}},{key:"serverKeyDown",value:function(e){if(e.playerId!==this.localPlayerId){var t=e.key;this.state.players[e.playerId].keyStates[t]=!0}}},{key:"serverKeyUp",value:function(e){if(e.playerId!==this.localPlayerId){var t=e.key;this.state.players[e.playerId].keyStates[t]=!1}}},{key:"localKeyDown",value:function(t){var a=t.key;e.RECOGNIZED_KEYS.includes(a)&&(this.state.players[this.localPlayerId].keyStates[a]=!0,this.socket.emit("event",{type:"input_key_down",playerId:this.localPlayerId,key:a}))}},{key:"localKeyUp",value:function(t){var a=t.key;e.RECOGNIZED_KEYS.includes(a)&&(this.state.players[this.localPlayerId].keyStates[a]=!1,this.socket.emit("event",{type:"input_key_up",playerId:this.localPlayerId,key:a}))}},{key:"localMouseMove",value:function(e){this.sendMouseMove()}},{key:"localClick",value:function(e){this.socket.emit("event",{type:"input_click",playerId:this.localPlayerId})}},{key:"sendChatMessage",value:function(e){this.socket.emit("event",{type:"chat_message",message:e,playerId:this.localPlayerId,time:new Date})}},{key:"getLocalPlayer",value:function(){return this.state.players[this.localPlayerId]}}]),e}();w.RECOGNIZED_KEYS=["a","w","s","d","f","e","q"," ","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w.KEY_TO_DIRECTION={a:"left",w:"up",s:"down",d:"right"};var O=w,j=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,null,[{key:"listenFor",value:function(t,a){e.eventMaps[t]=a}},{key:"mouseMove",value:function(t){Object.values(e.eventMaps).forEach((function(e){return e.mouse_move?e.mouse_move(t):null}))}},{key:"click",value:function(t){Object.values(e.eventMaps).forEach((function(e){return e.click?e.click(t):null}))}}]),e}();j.MOUSE_MOVE="mouse_move",j.CLICK="click",j.eventMaps={};var E=j,S=a(39),M=a(19),x=a(26),I=a(50),P=a.n(I),_=a(82),C=a(54),z={moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,moveUp:!1,moveDown:!1,crouch:!1,jump:!1,attack:!1},D=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,null,[{key:"init",value:function(){var e=this,t={baseUrl:"models/ogro/",body:"ogro.md2",skins:["grok.jpg","ogrobase.png","arboshak.png","ctf_r.png","ctf_b.png","darkam.png","freedom.png","gib.png","gordogh.png","igdosh.png","khorne.png","nabogro.png","sharokh.png"],weapons:[["weapon.md2","weapon.jpg"]],animations:{move:"run",idle:"stand",jump:"jump",attack:"attack",crouchMove:"cwalk",crouchIdle:"cstand",crouchAttach:"crattack"},walkSpeed:1e3,crouchSpeed:175};this.skinCount=t.skins.length,this.base=new C.a,this.base.scale=1,this.basePromise=new Promise((function(t,a){e.base.onLoadComplete=function(){e.base.enableShadows(!0),e.base.setSkin(2),t(e.base)}})),this.base.loadParts(t)}},{key:"customizeMovement",value:function(e){var t;e.updateMovementModel=(t=e,function(e){var a=t.controls;t.decceleration=1500,t.maxSpeed=t.walkSpeed,t.moveDirection||(t.moveDirection=new l.Vector3);var n=a.moveForward?1:0,r=a.moveBackward?-1:0,o=a.moveRight?-1:0,s=a.moveLeft?1:0,c=a.moveUp?1:0,i=a.moveDown?-1:0;t.impulseDirection=new l.Vector3(o+s,c+i,n+r),t.impulseDirection.normalize();var u=new l.Vector3(0,0,1).applyAxisAngle(new l.Vector3(0,1,0),t.bodyOrientation),p=new l.Vector3(t.target.x,t.target.y,t.target.z).clone().sub(t.root.position).normalize();p.y=0;var h=u.cross(p).y;if(t.bodyOrientation+=h*e*10,t.impulseDirection.applyAxisAngle(new l.Vector3(0,1,0),t.bodyOrientation),t.impulseDirection.length()>0&&t.moveDirection.copy(t.impulseDirection),Math.abs(h)>.2&&(t.speed=h*e*10,h<0?a.moveLeft=!0:a.moveRight=!0),t.impulseDirection.length()>0)t.speed=t.maxSpeed;else{var y=f.exponentialEaseOut(t.speed/t.maxSpeed);t.speed=l.MathUtils.clamp(t.speed-y*e*t.decceleration,0,t.maxSpeed)}var d=t.moveDirection.clone().multiplyScalar(t.speed*e/10);t.root.position.add(d),t.root.rotation.y=t.bodyOrientation})}},{key:"getModelInstance",value:function(){var e=Object(_.a)(P.a.mark((function e(){var t,a,n=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.instanceIndex,this.instanceIndex=(this.instanceIndex+1)%this.skinCount,(a=new C.a).scale=1,a.controls=this.getControlsCopy(),a.id=Math.random(),this.customizeMovement(a),e.next=9,this.basePromise.then((function(e){return a.shareParts(e),a.enableShadows(!0),a.setSkin(t),a.target=new l.Vector3,a.setWeapon(0),a}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getControlsCopy",value:function(){var e={};return Object.keys(z).forEach((function(t){return e[t]=z[t]})),e}}]),e}();D.instanceIndex=2,D.init();var V=D;a(186);var A=function(e){var t=e.player,a=e.messages,o=Object(n.useState)(null),s=Object(c.a)(o,2),i=s[0],u=s[1],h=Object(n.useState)(0),y=Object(c.a)(h,2),d=y[0],m=y[1],v=Object(n.useState)(null),g=Object(c.a)(v,2),b=g[0],k=g[1],w=Object(p.e)().size;return Object(n.useEffect)((function(){V.getModelInstance(t.skindex).then((function(e){var a=f.computeCompositeBoundingBox(e.root);m(a.getSize().y),u(e),e.root.position.set(t.position.x,e.root.position.y,t.position.z);var n=new x.a;n.setPositions([0,0,0,0,0,100]);var r=new M.a({color:1179494,linewidth:1,vertexColors:!1,dashed:!1,resolution:new l.Vector2(w.width,w.height)}),o=new S.a(n,r);o.computeLineDistances(),e.root.add(o),k(o)}))}),[]),Object(p.d)((function(e,a){if(i){i.controls.moveForward=t.keyStates.w||t.keyStates.ArrowUp,i.controls.moveBackward=t.keyStates.s||t.keyStates.ArrowDown,i.controls.moveLeft=t.keyStates.a||t.keyStates.ArrowLeft,i.controls.moveRight=t.keyStates.d||t.keyStates.ArrowRight,i.controls.moveUp=t.keyStates.q,i.controls.moveDown=t.keyStates.e,i.controls.jump=t.keyStates[" "],i.controls.attack=t.keyStates.f,i.target=t.target,i.update(1.75*a),t.position.x=i.root.position.x,t.position.y=i.root.position.y,t.position.z=i.root.position.z;var n=new l.Vector3(t.position.x,t.position.y,t.position.z),r=new l.Vector3(i.target.x,i.target.y,i.target.z);r.sub(n),b.rotation.y=-i.bodyOrientation,b.geometry.setPositions([0,20,5,r.x,r.y,r.z]),b.geometry.needsUpdate=!0}})),r.a.createElement("mesh",null,i&&r.a.createElement(r.a.Fragment,null,r.a.createElement("primitive",{object:i.root,onClick:function(e){return console.log("click")}}),r.a.createElement(p.b,{center:!0,position:[t.position.x,t.position.y,t.position.z]},r.a.createElement("div",{className:"scene-label"},t.name)),a.map((function(e,a){return r.a.createElement(p.b,{key:e.time,center:!0,position:[t.position.x,t.position.y+d/1.5,t.position.z]},r.a.createElement("div",{style:{transform:"translateY(".concat(2.1*-a,"rem)")},className:"speech-bubble"},e.message))}))))};Object(p.c)({LineMaterial:M.a,LineGeometry:x.a,Line2:S.a});var L=function(e){var t=e.finishStructureFunc,a=Object(n.useState)([]),o=Object(c.a)(a,2),s=o[0],u=o[1],y=Object(n.useState)(null),d=Object(c.a)(y,2),m=d[0],v=d[1],g=Object(n.useState)(!1),b=Object(c.a)(g,2),k=b[0],w=b[1],O=Object(p.e)().size;Object(n.useEffect)((function(){var e;E.listenFor("partial_structure",(e={},Object(h.a)(e,E.MOUSE_MOVE,(function(e){if(s.length>0){var t=new l.Vector3(e.point.x,e.point.y+.1,e.point.z);v(t)}})),Object(h.a)(e,E.CLICK,(function(e){var a=new l.Vector3(e.point.x,e.point.y,e.point.z),n=!1;if(s.length>2){var r=a.clone().sub(s[0]);r.length()<20&&(a.add(r),n=!0)}if(a.y+=.1,u([].concat(Object(i.a)(s),[a])),n){var o=e.object.rotation.clone();o.x*=-1,o.y*=-1,o.z*=-1;var c=e.face.normal.clone().applyEuler(o),p=f.centroid(s),h={start:p,end:p.clone().addScaledVector(c,10)},y={id:f.generateId(),points:s,extrusionLine:h};t(y),u([]),w(!1),v(null)}})),e))}),[s]);var j=Object(p.f)((function(e){if(s.length<1||null===m)e.setPositions(new Float32Array(150));else{var a=m.clone();if(s.length>2){var n=s[0].clone().sub(m);n.length()<20?(a.add(n),w(!0)):w(!1),s[0].clone().sub(s[s.length-1]).length()<.1&&(t(s),u([]),w(!1),v(null))}var r=s.reduce((function(e,t){var a=t.x,n=t.y,r=t.z;return[].concat(Object(i.a)(e),[a,n,r])}),[],[]);for(r.push(a.x,a.y,a.z);r.length<150;)r.push(r[r.length-3],r[r.length-2],r[r.length-1]);r.length=Math.min(150,r.length),e.setPositions(r)}}),[s,m]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("line2",null,r.a.createElement("lineGeometry",{attach:"geometry",ref:j}),r.a.createElement("lineMaterial",{attach:"material",color:16776977,linewidth:5,resolution:[O.width,O.height]})),s.map((function(e,t){return r.a.createElement("mesh",{key:e.x+e.y+e.z+"",position:[e.x,e.y,e.z]},r.a.createElement("sphereGeometry",{attach:"geometry",args:[0===t&&k?12:7,32,32]}),r.a.createElement("meshPhysicalMaterial",{attach:"material",color:0===t&&k?65280:16776977,clearcoat:!0,metalness:.95,clearcoatRoughness:.25,roughness:0,emmissive:16777215}))})))};var R=function(e){var t=e.points,a=e.extrusionLine,o=Object(n.useState)(t),s=Object(c.a)(o,2),i=s[0],u=(s[1],Object(n.useState)([])),p=Object(c.a)(u,2),h=(p[0],p[1]),y=Object(n.useState)(null),d=Object(c.a)(y,2),m=d[0],v=d[1],g=Object(n.useState)({steps:1,depth:8}),f=Object(c.a)(g,2),b=f[0],k=(f[1],Object(n.useState)(-1)),w=Object(c.a)(k,2);return w[0],w[1],Object(n.useRef)(),Object(n.useEffect)((function(){var e=a.end.clone().sub(a.start);h(i.map((function(t){return t.clone().add(e)}))),v(new l.Shape(i.map((function(e){return new l.Vector2(e.x,e.z)}))))}),[i,a]),r.a.createElement(r.a.Fragment,null,m&&r.a.createElement("mesh",{"rotation-x":Math.PI/2,"position-y":4,castShadow:!0},r.a.createElement("extrudeBufferGeometry",{attach:"geometry",args:[m,b]}),r.a.createElement("meshPhysicalMaterial",{attach:"material",color:16777215,metalness:.9,roughness:0,clearcoat:!0,clearcoatRoughness:.5})))},B=(a(192),a(226));var N=function(e){var t=e.sendChatMessage,a=e.messages,o=e.hideChat,s=Object(n.useState)(""),i=Object(c.a)(s,2),l=i[0],u=i[1],p=Object(n.useRef)();return Object(n.useEffect)((function(){p.current.scrollTop=p.current.scrollHeight}),[a]),r.a.createElement("div",{className:"ChatWindow"},r.a.createElement("div",{className:"all-messages",ref:p},a.map((function(e){return r.a.createElement("div",{className:"chat-message",key:e.time},r.a.createElement("div",{className:"chat-message-name"},e.player.name,":"),r.a.createElement("div",{className:"chat-message-content"},e.message))}))),r.a.createElement(B.c,{className:"your-message",placeholder:"your message...",large:!0,onKeyDown:function(e){13===e.which?(t(l),u("")):27===e.which&&o()},value:l,onChange:function(e){return u(e.target.value)},autoFocus:!0}))},U=a(91),F=a(90),K=a(92),T=a(93);a(219);Object(p.c)({EffectComposer:U.a,RenderPass:F.a,UnrealBloomPass:T.a,SSAOPass:K.a});var G=new u.a,W=new l.Vector3(0,100,100),q=new l.Vector3(0,0,0),Y=(new l.Vector3,new l.Vector3),J=1,Z=function(e){var t=e.playground,a=e.setChatVisible,r=e.chatVisible,o=Object(p.e)(),s=o.camera,c=o.gl;return Object(p.d)((function(){G.update();var e=t.getLocalPlayer().position,a=t.getLocalPlayer().target,n=new l.Vector3(e.x,e.y,e.z),r=n.set(n.x,n.y+70,n.z),o=new l.Vector3(a.x,a.y,a.z).clone().sub(r).normalize().clone().multiplyScalar(-200*J);o.z=Math.max(Math.abs(o.z),50)*Math.sign(o.z),o.y=Math.max(o.y,50),W.copy(n.clone().add(o)),q.copy(n);var c=l.MathUtils.clamp(s.position.clone().sub(W).length()/10,.1,4);s.position.copy(s.position.lerp(W,.005*c));var i=Y.lerp(q,.05).clone();s.lookAt(i),s.updateProjectionMatrix(),Y.copy(i)})),Object(n.useEffect)((function(){c.domElement.onclick=function(e){a(!1),t&&t.localClick(e)},window.onkeydown=function(e){"t"===e.key?(r||e.preventDefault(),a(!0)):27===e.which&&a(!r),t&&!r&&t.localKeyDown(e)},window.onkeyup=function(e){t&&t.localKeyUp(e)},c.domElement.onmousemove=function(e){t&&t.localMouseMove(e)},c.domElement.onwheel=function(e){e.preventDefault(),J+=.01*e.deltaY,J=Math.min(Math.max(.05,J),3)}}),[c,t,r]),null};function H(e){var t=e.ssao,a=e.bloom,o=Object(p.e)(),s=o.gl,c=o.scene,i=o.camera,l=o.size,u=Object(n.useRef)();return Object(n.useEffect)((function(){u.current.setSize(l.width,l.height)}),[l]),Object(p.d)((function(){return u.current.render()}),1),r.a.createElement("effectComposer",{ref:u,args:[s]},r.a.createElement("renderPass",{attachArray:"passes",args:[c,i]}),a&&r.a.createElement("unrealBloomPass",{attachArray:"passes",args:[void 0,1.5,.4,.6],bloomThreshold:1,bloomStrength:1,bloomRadius:0}),t&&r.a.createElement("sSAOPass",{attachArray:"passes",args:[c,i,l.width,l.height],kernelRadius:16,minDistance:.005,maxDistance:50}))}var Q=function(e){var t=e.player,a=Object(n.useState)([]),o=Object(c.a)(a,2),s=o[0],u=o[1],h=Object(n.useState)([]),y=Object(c.a)(h,2),d=y[0],m=y[1],v=Object(n.useState)(null),g=Object(c.a)(v,2),f=g[0],b=g[1],k=Object(n.useState)(!1),w=Object(c.a)(k,2),j=w[0],S=w[1],M=Object(n.useState)([]),x=Object(c.a)(M,2),I=x[0],P=x[1],_=Object(n.useMemo)((function(){return(new l.TextureLoader).load("rust2.jpg")}),[]);return Object(n.useEffect)((function(){b(new O(t,(function(e){return u(e)}),(function(e){return m(e)})))}),[t]),r.a.createElement("div",{className:"main-canvas-container"},r.a.createElement(p.a,{style:{backgroundColor:"#789"},gl:{antialias:!1,alpha:!1},pixelRatio:window.devicePixelRatio,camera:{position:[0,10,10],near:1,far:4e3},shadowMap:!0,onCreated:function(e){var t=e.gl;t.toneMapping=l.Uncharted2ToneMapping,t.outputEncoding=l.sRGBEncoding,t.shadowMap.type=l.PCFSoftShadowMap,t.setClearColor(new l.Color("#667788"))}},r.a.createElement(H,null),r.a.createElement(Z,{playground:f,setChatVisible:S,chatVisible:j}),r.a.createElement("fog",{attach:"fog",args:[6715272,500,1500]}),r.a.createElement("ambientLight",{args:[6710886]}),r.a.createElement("directionalLight",{args:[16777215,7],position:[0,6e3,3e3],"shadow-camera-left":-1e3,"shadow-camera-bottom":-1e3,"shadow-camera-right":1e3,"shadow-camera-top":1e3,"shadow-camera-near":1,"shadow-camera-far":12e3,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,castShadow:!0}),s.map((function(e){return r.a.createElement(A,{key:e.id,player:e,messages:e.visibleMessages})})),r.a.createElement(L,{finishStructureFunc:function(e){console.log("finished structure",e),P([].concat(Object(i.a)(I),[e]))}}),I.map((function(e){return r.a.createElement(R,{key:e.id,points:e.points,extrusionLine:e.extrusionLine})})),r.a.createElement("mesh",{receiveShadow:!0,"rotation-x":-Math.PI/2,onPointerMove:function(e){f.getLocalPlayer().target=e.point,E.mouseMove(e)},onClick:function(e){E.click(e)}},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[16e3,16e3]}),r.a.createElement("meshStandardMaterial",{attach:"material",color:3355443,roughness:.55,metalness:.8},r.a.createElement("primitive",{attach:"map",object:_,repeat:[64,64],wrapS:l.RepeatWrapping,wrapT:l.RepeatWrapping,encoding:l.sRGBEncoding})))),f&&j&&r.a.createElement(N,{sendChatMessage:f.sendChatMessage.bind(f),messages:d,hideChat:function(){return S(!1)}}))};a(220);var X=function(e){var t=e.logIn,a=Object(n.useState)(""),o=Object(c.a)(a,2),s=o[0],i=o[1];return r.a.createElement("div",{className:"login-container bp3-light"},r.a.createElement(B.b,{label:"Choose a name to use:"},r.a.createElement(B.c,{autoFocus:!0,placeholder:"name...",large:!0,onChange:function(e){var t=e.target.value||"";i(t)},onKeyDown:function(e){return 13===e.which?t(b.create(s)):""}})),r.a.createElement(B.a,{onClick:function(){t(b.create(s))}},"Join"))};a(221);var $=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(null),i=Object(c.a)(s,2),l=i[0],u=i[1],p=function(e){u(e),o(!0)};return Object(n.useEffect)((function(){0}),[]),r.a.createElement("div",{className:"App bp3-dark"},l&&r.a.createElement(Q,{player:l}),r.a.createElement("div",{className:"screen-container"},!a&&r.a.createElement(X,{logIn:p})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.d22f3ac1.chunk.js.map